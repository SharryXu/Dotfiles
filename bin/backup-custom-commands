#!/bin/bash

# Backup custom commands.
# Globals:
#   rsync
# Arguments:
#   None
# Returns:
#   None

function usage() {
  echo -e "usage: $(basename "$0") source_folder_path"

  exit 1
}

function backup_custom_commands() {
  if [ ! -d "$HOME"/.bin ]; then
    mkdir "$HOME"/.bin
  fi

  rsync -avz --delete "$HOME"/.bin/ "$1"/bin

  # Make all files executable
  for i in "$1"/bin/*; do
    chmod +x "$i"
  done
}

if [ $# -eq 1 ]; then
  backup_custom_commands "$1"

  exit 0
else
  usage
fi
